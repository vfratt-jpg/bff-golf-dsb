<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Performance Analytics - Our Golf Journey BFF</title>
<link href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;â›³&lt;/text&gt;&lt;/svg&gt;" rel="icon"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            min-height: 100vh;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .logo h1 {
            color: #1e3c72;
            font-size: 24px;
            font-weight: 700;
            line-height: 1.2;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
        }

        .btn-secondary {
            background: rgba(30, 60, 114, 0.1);
            color: #1e3c72;
            border: 2px solid #1e3c72;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .analytics-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .analytics-card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }

        .competitive-icon { background: linear-gradient(135deg, #FF5722, #D84315); }
        .dominance-icon { background: linear-gradient(135deg, #FFD700, #FFA000); }
        .difficulty-icon { background: linear-gradient(135deg, #9C27B0, #7B1FA2); }
        .trends-icon { background: linear-gradient(135deg, #2196F3, #1976D2); }
        .versatility-icon { background: linear-gradient(135deg, #4CAF50, #2E7D32); }
        .activity-icon { background: linear-gradient(135deg, #FF9800, #F57C00); }

        .card h3 {
            color: #1e3c72;
            font-size: 18px;
            font-weight: 600;
        }

        .chart-container {
            position: relative;
            height: 350px;
            margin-top: 20px;
        }

        .large-chart {
            height: 450px;
        }

        .insights-list {
            list-style: none;
            margin-top: 15px;
        }

        .insights-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
        }

        .insights-list li:last-child {
            border-bottom: none;
        }

        .metric-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }

        .competitive { background: #e8f5e8; color: #2E7D32; }
        .dominated { background: #fff3e0; color: #F57C00; }
        .moderate { background: #e3f2fd; color: #1976D2; }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .logo h1 {
                font-size: 20px;
                text-align: center;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
<header class="header">
<div class="header-content">
<div class="logo">
<div class="logo-icon">ğŸ“Š</div>
<h1>Performance Analytics - BFF Golf Journey</h1>
</div>
<div class="nav-buttons">
<a class="btn btn-primary" href="index.html">
                    ğŸ  Main Dashboard
                </a>
<a class="btn btn-secondary" href="our-story.html">
                    ğŸ“– Our Story
                </a>
<button class="btn btn-secondary" onclick="downloadReport()">
                    ğŸ“„ Download Report
                </button>
</div>
</div>
</header>
<div class="container">
<div class="analytics-grid">
<!-- Competitiveness Analysis -->
<div class="analytics-card">
<div class="card-header">
<div class="card-icon competitive-icon">ğŸ”¥</div>
<h3>Championship Competitiveness</h3>
</div>
<div class="chart-container">
<canvas id="competitivenessChart"></canvas>
</div>
<ul class="insights-list">
<li>ğŸ¥‡ Most Competitive: SUC <span class="metric-badge competitive">1.000</span></li>
<li>ğŸ¥ˆ Balanced: Paultz &amp; Petty Cup <span class="metric-badge moderate">0.467</span></li>
<li>ğŸ¥‰ Dominated: COW/UCOW <span class="metric-badge dominated">0.158</span></li>
</ul>
</div>
<!-- Player Dominance -->
<div class="analytics-card">
<div class="card-header">
<div class="card-icon dominance-icon">ğŸ‘‘</div>
<h3>Player Dominance Analysis</h3>
</div>
<div class="chart-container">
<canvas id="dominanceChart"></canvas>
</div>
<ul class="insights-list">
<li>ğŸ¯ Most Versatile: Vince Frattaroli (7/8 trophy types)</li>
<li>âš¡ Most Focused: Jim Flanagan (4/8 trophy types)</li>
<li>ğŸŒŸ Rising Star: John Bart (recent success)</li>
</ul>
</div>
<!-- Scoring Difficulty -->
<div class="analytics-card">
<div class="card-header">
<div class="card-icon difficulty-icon">ğŸ¯</div>
<h3>Tournament Difficulty Analysis</h3>
</div>
<div class="chart-container">
<canvas id="difficultyChart"></canvas>
</div>
<ul class="insights-list">
<li>ğŸ”¥ Hardest: SUC (81.3 avg score)</li>
<li>âš¡ Challenging: TAMC (84.2 avg score)</li>
<li>ğŸ“Š Most Variable: Petty Cup (103-point spread)</li>
</ul>
</div>
<!-- Tournament Activity Trends -->
<div class="analytics-card">
<div class="card-header">
<div class="card-icon trends-icon">ğŸ“ˆ</div>
<h3>Activity Trends (2020-2025)</h3>
</div>
<div class="chart-container">
<canvas id="trendsChart"></canvas>
</div>
<ul class="insights-list">
<li>ğŸ“Š Peak Year: 2021 (13 tournaments)</li>
<li>ğŸ”„ Paultz Revival: 2023-2024 comeback</li>
<li>ğŸ† Consistent: Petty Cup annual tradition</li>
</ul>
</div>
<!-- Player Versatility -->
<div class="analytics-card">
<div class="card-header">
<div class="card-icon versatility-icon">ğŸ¨</div>
<h3>Player Versatility Matrix</h3>
</div>
<div class="chart-container">
<canvas id="versatilityChart"></canvas>
</div>
<ul class="insights-list">
<li>ğŸ† Vince: 19 wins across 7 trophy types</li>
<li>âš¡ Jim: 18 wins focused on 4 trophy types</li>
<li>ğŸ¯ Ken: 4 wins across 4 trophy types</li>
</ul>
</div>
<!-- Championship Activity Heatmap -->
<div class="analytics-card">
<div class="card-header">
<div class="card-icon activity-icon">ğŸ—“ï¸</div>
<h3>Trophy Type Distribution</h3>
</div>
<div class="chart-container large-chart">
<canvas id="activityChart"></canvas>
</div>
<ul class="insights-list">
<li>ğŸ”¥ Most Active: COW/UCOW (19 total tournaments)</li>
<li>ğŸ“… Most Consistent: Petty Cup (annual schedule)</li>
<li>ğŸ”„ Biggest Gap: Paultz (2019-2023 hiatus)</li>
</ul>
</div>
</div>
</div>
<script>
        let championshipsData = [];
        let charts = {};

        // Load championship data
        async function loadChampionshipData() {
            try {
                const response = await fetch('./data/championships.json');
                championshipsData = await response.json();
                createAllCharts();
            } catch (error) {
                console.error('Error loading championship data:', error);
            }
        }

        function createAllCharts() {
            createCompetitivenessChart();
            createDominanceChart();
            createDifficultyChart();
            createTrendsChart();
            createVersatilityChart();
            createActivityChart();
        }

        function createCompetitivenessChart() {
            const ctx = document.getElementById('competitivenessChart').getContext('2d');
            
            // Calculate competitiveness scores
            const trophyTypes = [...new Set(championshipsData.map(c => c.trophy))];
            const competitivenessData = trophyTypes.map(trophy => {
                const trophyData = championshipsData.filter(c => c.trophy === trophy);
                const uniqueWinners = new Set(trophyData.map(c => c.name)).size;
                return {
                    trophy,
                    score: uniqueWinners / trophyData.length,
                    tournaments: trophyData.length
                };
            }).sort((a, b) => b.score - a.score);

            charts.competitiveness = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: competitivenessData.map(d => d.trophy),
                    datasets: [{
                        label: 'Competitiveness Score',
                        data: competitivenessData.map(d => d.score),
                        backgroundColor: [
                            '#FF5722', '#FF9800', '#FFC107', '#4CAF50',
                            '#2196F3', '#9C27B0', '#795548', '#607D8B'
                        ],
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const data = competitivenessData[context.dataIndex];
                                    return `Score: ${context.parsed.y.toFixed(3)} (${data.tournaments} tournaments)`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1,
                            title: { display: true, text: 'Competitiveness Score' }
                        }
                    }
                }
            });
        }

        function createDominanceChart() {
            const ctx = document.getElementById('dominanceChart').getContext('2d');
            
            // Calculate player wins
            const playerWins = {};
            championshipsData.forEach(c => {
                playerWins[c.name] = (playerWins[c.name] || 0) + 1;
            });

            const sortedPlayers = Object.entries(playerWins)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 8);

            charts.dominance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: sortedPlayers.map(([name]) => name),
                    datasets: [{
                        data: sortedPlayers.map(([, wins]) => wins),
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0',
                            '#9966FF', '#FF9F40', '#FF6384', '#C9CBCF'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                generateLabels: function(chart) {
                                    const data = chart.data;
                                    return data.labels.map((label, i) => {
                                        const wins = data.datasets[0].data[i];
                                        return {
                                            text: `${label} (${wins})`,
                                            fillStyle: data.datasets[0].backgroundColor[i],
                                            hidden: false,
                                            index: i
                                        };
                                    });
                                }
                            }
                        }
                    }
                }
            });
        }

        function createDifficultyChart() {
            const ctx = document.getElementById('difficultyChart').getContext('2d');
            
            // Calculate average scores (excluding Paultz fixed scores)
            const trophyScores = {};
            championshipsData.forEach(c => {
                if (c.score !== 62) { // Exclude Paultz fixed scores
                    if (!trophyScores[c.trophy]) trophyScores[c.trophy] = [];
                    trophyScores[c.trophy].push(c.score);
                }
            });

            const difficultyData = Object.entries(trophyScores)
                .map(([trophy, scores]) => ({
                    trophy,
                    avgScore: scores.reduce((a, b) => a + b, 0) / scores.length,
                    count: scores.length
                }))
                .sort((a, b) => a.avgScore - b.avgScore);

            charts.difficulty = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: difficultyData.map(d => d.trophy),
                    datasets: [{
                        label: 'Average Score',
                        data: difficultyData.map(d => d.avgScore),
                        backgroundColor: '#9C27B0',
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const data = difficultyData[context.dataIndex];
                                    return `Avg Score: ${context.parsed.y.toFixed(1)} (${data.count} tournaments)`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Average Score (Lower = Harder)' }
                        }
                    }
                }
            });
        }

        function createTrendsChart() {
            const ctx = document.getElementById('trendsChart').getContext('2d');
            
            // Calculate yearly activity
            const yearlyActivity = {};
            championshipsData.forEach(c => {
                const year = new Date(c.date).getFullYear();
                if (year >= 2020) {
                    yearlyActivity[year] = (yearlyActivity[year] || 0) + 1;
                }
            });

            const years = Object.keys(yearlyActivity).sort();
            const counts = years.map(year => yearlyActivity[year]);

            charts.trends = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: years,
                    datasets: [{
                        label: 'Tournaments per Year',
                        data: counts,
                        borderColor: '#2196F3',
                        backgroundColor: '#2196F3',
                        tension: 0.4,
                        fill: false,
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Number of Tournaments' }
                        }
                    }
                }
            });
        }

        function createVersatilityChart() {
            const ctx = document.getElementById('versatilityChart').getContext('2d');
            
            // Calculate player versatility
            const playerVersatility = {};
            const totalTrophyTypes = new Set(championshipsData.map(c => c.trophy)).size;
            
            championshipsData.forEach(c => {
                if (!playerVersatility[c.name]) {
                    playerVersatility[c.name] = { wins: 0, trophies: new Set() };
                }
                playerVersatility[c.name].wins++;
                playerVersatility[c.name].trophies.add(c.trophy);
            });

            const versatilityData = Object.entries(playerVersatility)
                .map(([name, data]) => ({
                    name,
                    wins: data.wins,
                    versatility: data.trophies.size / totalTrophyTypes
                }))
                .filter(d => d.wins >= 3) // Only show players with 3+ wins
                .sort((a, b) => b.wins - a.wins);

            charts.versatility = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Players',
                        data: versatilityData.map(d => ({ x: d.versatility, y: d.wins })),
                        backgroundColor: versatilityData.map((_, i) => 
                            ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF'][i % 5]
                        ),
                        pointRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const player = versatilityData[context.dataIndex];
                                    return `${player.name}: ${player.wins} wins, ${(player.versatility * 100).toFixed(1)}% versatility`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Versatility Score (Trophy Types Won / Total Types)' },
                            min: 0,
                            max: 1
                        },
                        y: {
                            title: { display: true, text: 'Total Wins' },
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function createActivityChart() {
            const ctx = document.getElementById('activityChart').getContext('2d');
            
            // Create activity matrix by year and trophy
            const years = [...new Set(championshipsData.map(c => new Date(c.date).getFullYear()))].sort();
            const trophies = [...new Set(championshipsData.map(c => c.trophy))];
            
            // Calculate total count for each trophy
            const trophyCounts = {};
            championshipsData.forEach(c => {
                trophyCounts[c.trophy] = (trophyCounts[c.trophy] || 0) + 1;
            });
            
            const datasets = trophies.map((trophy, index) => {
                const data = years.map(year => {
                    return championshipsData.filter(c => 
                        new Date(c.date).getFullYear() === year && c.trophy === trophy
                    ).length;
                });
                
                const colors = [
                    '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0',
                    '#9966FF', '#FF9F40', '#FF6384', '#C9CBCF'
                ];
                
                return {
                    label: `${trophy} (${trophyCounts[trophy]})`,
                    data: data,
                    backgroundColor: colors[index % colors.length],
                    borderRadius: 4
                };
            });

            charts.activity = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: years,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { usePointStyle: true }
                        }
                    },
                    scales: {
                        x: { stacked: true },
                        y: { 
                            stacked: true,
                            beginAtZero: true,
                            title: { display: true, text: 'Number of Tournaments' }
                        }
                    }
                }
            });
        }

        function downloadReport() {
            const link = document.createElement('a');
            link.href = './PERFORMANCE_ANALYSIS_REPORT.md';
            link.download = 'BFF_Golf_Performance_Analysis_Report.md';
            link.click();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadChampionshipData();
        });
    </script>
</body>
</html>
